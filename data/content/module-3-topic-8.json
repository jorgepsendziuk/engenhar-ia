{
  "id": "module-3-topic-8",
  "title": "Cenários práticos de aplicação",
  "content": "## Introdução\n\nEste tópico explora cenários práticos específicos de aplicação de MCPs: plugins e agentes inteligentes consumindo MCPs, integrações com IDEs (copilots customizados) e conexões com sistemas corporativos (ERP, CRM, suporte, analytics).\n\n## Plugins e Agentes Inteligentes Consumindo MCPs\n\n### Plugin para ChatGPT/Claude\n\nCriar plugin que permite que ChatGPT ou Claude acessem seus sistemas via MCP:\n\n```typescript\n// Plugin MCP para ChatGPT\nclass ChatGPTMCPPlugin {\n  constructor(private mcpClient: MCPClient) {}\n  \n  // Expor métodos MCP como functions do ChatGPT\n  getFunctions() {\n    return [\n      {\n        name: 'get_customer_info',\n        description: 'Get customer information from CRM',\n        parameters: {\n          type: 'object',\n          properties: {\n            customerId: { type: 'string' }\n          }\n        }\n      },\n      {\n        name: 'create_support_ticket',\n        description: 'Create a support ticket',\n        parameters: {\n          type: 'object',\n          properties: {\n            customerId: { type: 'string' },\n            subject: { type: 'string' },\n            description: { type: 'string' }\n          }\n        }\n      }\n    ];\n  }\n  \n  async executeFunction(name: string, args: any) {\n    // Mapear function call para chamada MCP\n    const mapping = {\n      'get_customer_info': { server: 'crm', method: 'get_customer', params: args },\n      'create_support_ticket': { server: 'support', method: 'create_ticket', params: args }\n    };\n    \n    const mcpCall = mapping[name];\n    if (!mcpCall) {\n      throw new Error(`Unknown function: ${name}`);\n    }\n    \n    const result = await this.mcpClient.call(\n      mcpCall.server,\n      mcpCall.method,\n      mcpCall.params\n    );\n    \n    return result.data;\n  }\n}\n```\n\n### Agente Autônomo Consumindo MCPs\n\nAgente que toma decisões e executa ações usando MCPs:\n\n```typescript\nclass AutonomousAgent {\n  constructor(private mcpClient: MCPClient, private llm: LLM) {}\n  \n  async executeTask(task: string) {\n    // 1. Planejar execução\n    const plan = await this.planTask(task);\n    \n    // 2. Executar plano usando MCPs\n    const results = [];\n    for (const step of plan.steps) {\n      const result = await this.mcpClient.call(\n        step.server,\n        step.method,\n        step.params\n      );\n      \n      results.push(result);\n      \n      // 3. Avaliar resultado e ajustar plano se necessário\n      if (!result.success) {\n        const adjustedPlan = await this.adjustPlan(plan, step, result);\n        // Continuar com plano ajustado\n      }\n    }\n    \n    // 4. Consolidar resultados\n    return this.consolidateResults(results);\n  }\n  \n  private async planTask(task: string) {\n    // Usar LLM para planejar\n    const capabilities = await this.mcpClient.discoverAll();\n    \n    const planPrompt = `Task: ${task}\\n\\nAvailable MCPs: ${JSON.stringify(capabilities)}\\n\\nCreate an execution plan.`;\n    \n    const planResponse = await this.llm.generate(planPrompt);\n    return JSON.parse(planResponse);\n  }\n}\n```\n\n## Integrações com IDEs (Copilots Customizados)\n\n### Copilot para VS Code\n\nCriar extensão do VS Code que usa MCPs para acessar sistemas internos:\n\n```typescript\n// VS Code Extension usando MCP\nimport * as vscode from 'vscode';\nimport { MCPClient } from '@modelcontextprotocol/sdk';\n\nclass VSCodeMCPCopilot {\n  private mcpClient: MCPClient;\n  \n  constructor(context: vscode.ExtensionContext) {\n    this.mcpClient = new MCPClient();\n    this.mcpClient.registerServer('crm', 'http://localhost:3000');\n    this.mcpClient.registerServer('jira', 'http://localhost:3001');\n    \n    // Registrar comandos\n    this.registerCommands(context);\n  }\n  \n  private registerCommands(context: vscode.ExtensionContext) {\n    // Comando: Buscar ticket do Jira\n    const jiraCommand = vscode.commands.registerCommand(\n      'mcp.getJiraTicket',\n      async () => {\n        const ticketId = await vscode.window.showInputBox({\n          prompt: 'Enter Jira ticket ID'\n        });\n        \n        if (ticketId) {\n          const ticket = await this.mcpClient.call('jira', 'get_ticket', { ticketId });\n          \n          // Mostrar no editor\n          const doc = await vscode.workspace.openTextDocument({\n            content: JSON.stringify(ticket.data, null, 2),\n            language: 'json'\n          });\n          \n          await vscode.window.showTextDocument(doc);\n        }\n      }\n    );\n    \n    context.subscriptions.push(jiraCommand);\n  }\n}\n```\n\n### Copilot para Cursor\n\nIntegração similar para Cursor IDE:\n\n```typescript\nclass CursorMCPIntegration {\n  // Permitir que Cursor acesse sistemas internos via MCP\n  async provideContext(query: string) {\n    // Analisar query e determinar quais MCPs usar\n    const relevantData = await this.gatherRelevantData(query);\n    \n    // Retornar contexto para Cursor\n    return {\n      context: relevantData,\n      suggestions: this.generateSuggestions(relevantData)\n    };\n  }\n  \n  private async gatherRelevantData(query: string) {\n    // Buscar dados relevantes de múltiplos MCPs\n    const [docs, tickets, code] = await Promise.all([\n      this.mcpClient.call('docs', 'search', { query }),\n      this.mcpClient.call('jira', 'search_tickets', { query }),\n      this.mcpClient.call('codebase', 'search_code', { query })\n    ]);\n    \n    return {\n      documentation: docs.data,\n      tickets: tickets.data,\n      code: code.data\n    };\n  }\n}\n```\n\n## Conexões com Sistemas Corporativos\n\n### Integração com ERP\n\n```typescript\nclass ERPMCPServer extends MCPServer {\n  constructor(private erpService: ERPService) {\n    super('erp-server', '1.0.0');\n    \n    this.registerMethod('get_inventory', this.getInventory.bind(this));\n    this.registerMethod('get_suppliers', this.getSuppliers.bind(this));\n    this.registerMethod('create_purchase_order', this.createPurchaseOrder.bind(this));\n    this.registerMethod('get_financial_report', this.getFinancialReport.bind(this));\n  }\n  \n  async getInventory(request: MCPRequest): Promise<MCPResponse> {\n    const { warehouseId, productId } = request.params;\n    \n    try {\n      const inventory = await this.erpService.getInventory(warehouseId, productId);\n      \n      return {\n        success: true,\n        data: {\n          warehouseId,\n          productId,\n          quantity: inventory.quantity,\n          reserved: inventory.reserved,\n          available: inventory.available\n        }\n      };\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n  \n  async createPurchaseOrder(request: MCPRequest): Promise<MCPResponse> {\n    const { supplierId, items, deliveryDate } = request.params;\n    \n    try {\n      const po = await this.erpService.createPurchaseOrder({\n        supplierId,\n        items,\n        deliveryDate\n      });\n      \n      return {\n        success: true,\n        data: {\n          id: po.id,\n          supplierId: po.supplierId,\n          total: po.total,\n          status: po.status\n        }\n      };\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n}\n```\n\n### Integração com Analytics\n\n```typescript\nclass AnalyticsMCPServer extends MCPServer {\n  constructor(private analyticsService: AnalyticsService) {\n    super('analytics-server', '1.0.0');\n    \n    this.registerMethod('get_metrics', this.getMetrics.bind(this));\n    this.registerMethod('get_dashboard', this.getDashboard.bind(this));\n    this.registerMethod('run_query', this.runQuery.bind(this));\n  }\n  \n  async getMetrics(request: MCPRequest): Promise<MCPResponse> {\n    const { metricName, period, filters } = request.params;\n    \n    try {\n      const metrics = await this.analyticsService.getMetrics(\n        metricName,\n        period,\n        filters\n      );\n      \n      return {\n        success: true,\n        data: {\n          metric: metricName,\n          period,\n          values: metrics.values,\n          trend: metrics.trend\n        }\n      };\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n  \n  async runQuery(request: MCPRequest): Promise<MCPResponse> {\n    const { query, parameters } = request.params;\n    \n    try {\n      // Validar query para segurança\n      if (!this.validateQuery(query)) {\n        return {\n          success: false,\n          error: { code: 'INVALID_QUERY', message: 'Query validation failed' }\n        };\n      }\n      \n      const results = await this.analyticsService.runQuery(query, parameters);\n      \n      return {\n        success: true,\n        data: results\n      };\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n  \n  private validateQuery(query: string): boolean {\n    // Validação de segurança (prevenir SQL injection, etc.)\n    // ...\n    return true;\n  }\n}\n```\n\n## Exemplo Completo: Sistema Integrado\n\n```typescript\nclass IntegratedEnterpriseSystem {\n  private mcpClient: MCPClient;\n  \n  constructor() {\n    this.mcpClient = new MCPClient();\n    \n    // Registrar todos os sistemas corporativos\n    this.mcpClient.registerServer('erp', 'http://erp-mcp:3000');\n    this.mcpClient.registerServer('crm', 'http://crm-mcp:3000');\n    this.mcpClient.registerServer('support', 'http://support-mcp:3000');\n    this.mcpClient.registerServer('analytics', 'http://analytics-mcp:3000');\n  }\n  \n  // Interface unificada para agentes\n  async handleAgentRequest(request: AgentRequest) {\n    // Analisar requisição\n    const plan = await this.planExecution(request);\n    \n    // Executar usando MCPs\n    const results = await this.executePlan(plan);\n    \n    // Retornar resultado consolidado\n    return this.consolidateResults(results);\n  }\n  \n  // Interface para plugins de IDE\n  async provideIDEContext(query: string) {\n    // Buscar contexto relevante de múltiplos sistemas\n    const context = await this.gatherContext(query);\n    \n    return context;\n  }\n}\n```\n\n## Conclusão\n\nCenários práticos de aplicação de MCPs incluem:\n\n- **Plugins e agentes**: Consumindo MCPs para ações autônomas\n- **IDEs**: Copilots customizados integrados\n- **Sistemas corporativos**: ERP, CRM, suporte, analytics\n\nEsses cenários demonstram a versatilidade do MCP em diferentes contextos de aplicação.",
  "resources": [
    {
      "type": "code",
      "title": "VS Code Extension with MCP",
      "description": "Exemplo de extensão VS Code usando MCP"
    },
    {
      "type": "link",
      "title": "IDE Integration Patterns",
      "description": "Padrões de integração com IDEs"
    },
    {
      "type": "code",
      "title": "MCP Agent Examples",
      "description": "Exemplos de agentes consumindo MCPs"
    }
  ]
}

